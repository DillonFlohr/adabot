<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="adabot">

    <!--
         Properties for the geometries
    -->
    <xacro:property name="wh_radius" value="0.5" />
    <xacro:property name="wh_length" value="0.2" />
    <xacro:property name="ax_axis" value="0 1 0" />
    <xacro:property name="ch_length" value="2" />
    <xacro:property name="ch_width" value="2" />
    <xacro:property name="ch_height" value="0.5" />
    <xacro:property name="zoffset" value="${wh_radius*1.1/2}" />

    <!--
         Properties for names and colors
    -->
    <xacro:property name="chassisname" value="base_link" />

    <material name="black">
        <color rgba="0 0 0 1" />
    </material>

    <material name="white">
        <color rgba="1 1 1 1" />
    </material>

    <!--
         Macro for creating wheel geoms
    -->
    <xacro:property name="wh-geom">
        <origin rpy="1.57075 0 0" xyz="0 0 0" />
        <geometry>
            <cylinder radius="${wh_radius}" length="${wh_length}" />
        </geometry>
    </xacro:property>

    <!-- 
         Macro for creating wheels
    -->
    <xacro:macro name="wheel" params="reflect_lr reflect_fb suffix parent">

        <link name="wh-${suffix}">
            <visual>
                <xacro:insert_block name="wh-geom" />
                <material name="black" />
                <origin rpy="1.57075 0 0" xyz="0 0 0" />
            </visual>
            <collision>
                <xacro:insert_block name="wh-geom" />
                <geometry>
        </link>

        <joint name="ax-${suffix}" type="continuous">
            <parent link="${parent}" />
            <child link="wh-${suffix}" />
            <origin rpy="0 0 0 " xyz="${ch_length/2*reflect_fb} ${(wh_length+ch_width)/2*reflect_lr} ${zoffset}" />
            <axis xyz="${ax_axis}" />
        </joint>

    </xacro:macro>

    <!--
         The main chassis/body
    -->
    <link name="${chassisname}">
        <visual>
            <geometry>
                <box size="${ch_length} ${ch_width} ${ch_height}" />
            </geometry>
            <origin rpy="0 0 0" xyz="0 0 ${zoffset}" />
            <material name="white" />
        </visual>
    </link>

    <!--
         Macro calls for creating wheels
    -->
    <xacro:wheel reflect_lr="-1" reflect_fb="1" suffix="front-left" parent="${chassisname}" />
    <xacro:wheel reflect_lr="1" reflect_fb="1" suffix="front-right" parent="${chassisname}" />
    <xacro:wheel reflect_lr="-1" reflect_fb="-1" suffix="back-left" parent="${chassisname}" />
    <xacro:wheel reflect_lr="1" reflect_fb="-1" suffix="back-right" parent="${chassisname}" />

</robot>

